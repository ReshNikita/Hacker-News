import{r as i,c,j as o,L as E,a as x}from"./index-f3ef2f42.js";import{u as l,a as u,f as d,S as p,E as S}from"./Story-601110d1.js";import{M as N}from"./Button-aa229601.js";const g=(e,t)=>e.time-t.time,T=(e,t,s,n)=>{let r;return()=>{const m=s&&!r,f=()=>{r=null,s||e.apply(void 0,n)};clearTimeout(r),r=setTimeout(f,t),m&&e.apply(void 0,n)}},h=()=>{const[e,t]=i.useState(!1),[s,n]=i.useState(c.STORIES_INCREMENT),r=T(()=>{if(window.innerHeight+document.documentElement.scrollTop!==document.documentElement.offsetHeight||e)return!1;t(!0)},500);return i.useEffect(()=>{e&&(s+c.STORIES_INCREMENT>=c.MAX_STORIES?n(c.MAX_STORIES):n(s+c.STORIES_INCREMENT),t(!1))},[e]),i.useEffect(()=>(window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)),[]),{count:s}},j=()=>{const{count:e}=h(),t=l(),{stories:s,areStoriesLoading:n}=u(a=>a.news),r=[...s].sort(g);return i.useEffect(()=>{t(d())},[]),o.jsx(o.Fragment,{children:n?o.jsx(E,{}):o.jsx("ul",{className:"flex flex-col items-center cursor-pointer",children:r.slice(0,e).map(a=>o.jsx(p,{...a},a.id))})})},M=()=>{const e=l(),{notification:t}=u(n=>n.error);i.useEffect(()=>{e(x())},[e]);const s=()=>e(d());return o.jsxs("main",{className:"mt-28",children:[o.jsx("div",{className:"flex justify-center mb-5",children:o.jsx(N,{onClick:s,text:c.UPDATE_BUTTON,className:"flex items-center p-4 h-6 border-2 border-solid rounded-2xl text-center leading-8 transition ease-in-out delay-100  bg-orange-700 hover:bg-orange-400"})}),t?o.jsx(S,{title:t.title,message:t.message}):o.jsx(j,{})]})};export{M as MainPage};
